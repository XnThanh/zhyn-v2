---
timestamp: 'Tue Oct 14 2025 22:18:47 GMT-0400 (Eastern Daylight Time)'
parent: '[[..\20251014_221847.819e0512.md]]'
content_id: 5a63e2edfffaa6c96fd080ae7bbab3ee9018e4cd66b98c1df622d72e8e19de17
---

# Test implementation

While testing, use the `testDb` function, which returns a tuple of the database and client so that you can close it.

```typescript
import { testDb } from "@utils/database.ts";

Deno.test("...", async () => {
  const [db, client] = await testDb();

  // ... tests

  await client.close();
});
```

The database is already automatically dropped before every test file using the `Deno.test.beforeAll` hook: do not include any additional manipulation of the database for this purpose.

Use the Deno.test framework, splitting by appropriate test steps and describing each behavior. Import helpers from:

```typescript
import { assertEquals } from "jsr:@std/assert"; // or any other utility from the library
```

**concept** ZhuyinDictionary
**purpose** tracks the Zhuyin Representation of Characters
**principle** each generate creates a random sentence with Chinese characters suitable to User level

**state**
a set of Characters with
  a ZhuyinRep

**actions**
register (Character, ZhuyinRep)
  requires Character doesn't already exist
  effect add Character and associate with that ZhuyinRep

unregister (Character, ZhuyinRep)
  requires Character already exist
  effect remove Character and corresponding ZhuyinRep

getAnswer (Character): (ZhuyinRep)
  effects returns the ZhuyinRep associated with the Character

lookupZhuyin (ZhuyinRep): (characters: Character\[])
effects Returns a list of all Characters whose Zhuyin representation matches ZhuyinRep. The pattern can be a full Zhuyin string, a partial prefix, or even support wildcards for more advanced search. This allows users to find all characters with a specific pronunciation.
