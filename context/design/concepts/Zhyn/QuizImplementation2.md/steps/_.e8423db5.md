---
timestamp: 'Wed Oct 15 2025 17:16:48 GMT-0400 (Eastern Daylight Time)'
parent: '[[..\20251015_171648.132f4cef.md]]'
content_id: e8423db54e0f3bc7f3a70aed6264f22884b4a3bb77a8a2f95219ee80cb236bdb
---

# Documentation

Every concept should have inline documentation and commenting:

* The concept itself should be paired with its purpose.
* The state should be described next to any types.
* Any testing should be guided by the principle.
* Each action should state the requirements and effects, and tests should check that both work against variations.

**concept** Quiz

**purpose** track User's Zhuyin typing ability

**principle** track and compiles the speed and accuracy for Characters that user typed

**state**\
a Quiz with\
  a set of questionList Questions\
  a set of incorrectList IncorrectRecords\
  a questionCount Number\
  a completedCount Number\
  an avgSpeed Number\
  an avgAccuracy Number\
  an active Boolean\
  a countdown Timer

a set of Questions with\
  an questionId String\
  a character Character\
  a target ZhuyinRep\
  a response ZhuyinRep?\
  a startTime DateTime?\
  an endTime DateTime?\
  a speed Number?\
  a correct Boolean?

a set of IncorrectRecords with\
  a character Character\
  a target ZhuyinRep\
  a response ZhuyinRep

**actions**\
beginQuiz (time: Number):\
  effects create a new Quiz with empty Question set, questionCount=0, completedCount=0, avgSpeed=0, avdAccuracy=0, active=False. Set countdown timer to time and start timer (via system sync)

endQuiz (): \[avgSpeed: Number, avgAccuracy: Number, incorrectRecords\[]]\
  requires countdown === 0:00
  effects return \[Quiz avgSpeed, Quiz avgAccuracy, Quiz incorrectList]

registerQuestion (Character, ZhuyinRep): (questionId: String)\
  requires Character and ZhuyinRep are a valid pair in ZhuyinDict\
  effects\
  Generate a questionId.\
  Create new Question with questionId, Character, and target ZhuyinRep, other fields unset.\
  Set Quiz questionCount += 1.\
  Add questionId to Quiz questionList.\
  Return questionId.

startQuestion (questionId: String)\
  requires Question exists and not already started (startTime is unset), Quiz active is False\
  effects\
  update startTime of coresponding Question to current time\
  set Quiz active = True

submitAnswer (questionId: String, response: ZhuyinRep)\
  requires Question exists and started, with endTime unset\
  effects\
  set Question endTime = current time\
  set Question response = response\
  set Question speed = endTime - startTime (in milliseconds)\
  set Question correct = (response = target)\
  set Quiz active = False\
  set Quiz completedCount += 1\
  if correct == False: create new IncorrectRecord and add to Quiz incorrectList\
  set Quiz avgSpeed = *new avg speed calculated by [incremental average formula](#incremental-average-formula)*\
  set Quiz avgAccuracy = *new avg accuracy calculated by [incremental average formula](#incremental-average-formula)*

**queries**\
getSpeed (questionId: String): (speed: Number)\
  requires Question exists and endTime set\
  effect return speed associated with Question

getAccuracy (questionId: String): (correct: Boolean)\
  requires Question exists and endTime set\
  effect return correct Boolean associated with Question

**sync** registerQuestion\
*when*\
  Quiz.registerQuestion (Character, providedZhuyinRep: ZhuyinRep)\
*where*\
  ZhuyinDictionary.getAnswer(Character): (registeredZhuyinRep: ZhuyinRep)\
*then*\
  if providedZhuyinRep === registeredZhuyinRep: Quiz.registerQuestion(Character, registeredZhuyinRep: ZhuyinRep): (questionId: String)\
  else: error

**sync** endQuiz\
*when*\
  system.countdown is 0:00\
*then*\
  Quiz.endQuiz()

**NOTES**

#### Incremental average formula:

( Old Average \* Old Count + New Value ) / New Count
